(this.webpackJsonpluck=this.webpackJsonpluck||[]).push([[0],{24:function(t,e,n){},39:function(t,e,n){"use strict";n.r(e);var o=n(0),i=n.n(o),r=n(8),a=n.n(r),c=(n(24),n(5)),s=n.n(c),u=n(9),f=n(4),d=n(3),l=n(17),p=n(1),h=n.n(p),x=n(18),g=n.n(x),b=n(19),m=n.n(b),w=n(2),j=function(){var t="https://img.alicdn.com/imgextra/i3/917298378/O1CN01xehpw42BlAxlaOqJ3_!!917298378.gif",e="https://img.alicdn.com/imgextra/i3/917298378/O1CN01UerpAW2BlAxjrJB70_!!917298378.png",n="1.25rem",i="#fdefeff5",r=g()(h.a),a=Object(o.useRef)(),c=Object(o.useRef)(-1),p=Object(o.useRef)(),x=Object(o.useRef)(),b=Object(o.useRef)(),j=Object(o.useRef)(),O=Object(o.useRef)(),C=Object(o.useState)(!1),y=Object(d.a)(C,2),k=y[0],v=y[1],S=Object(o.useState)("\u53c3\u8207\u62bd\u734e \u690d\u984c\u70ba\u4f60\u8cb7\u55ae"),B=Object(d.a)(S,2),z=B[0],I=B[1],R=Object(o.useState)([{x:0,y:0,borderRadius:"6px",fonts:[{text:"\u52a0\u8f09\u4e2d",top:"74%",fontSize:"12px"}],shadow:"0 6px 0 #ffbec3",imgs:[{src:e,top:"10%",width:"64%",height:"64%"}]},{x:1,y:0,borderRadius:"6px",shadow:"0 6px 0 #ffbec3",fonts:[{text:"\u52a0\u8f09\u4e2d",top:"74%",fontSize:"12px"}],imgs:[{src:e,top:"10%",width:"64%",height:"64%"}]},{x:2,y:0,borderRadius:"6px",shadow:"0 6px 0 #ffbec3",fonts:[{text:"\u52a0\u8f09\u4e2d",top:"74%",fontSize:"12px"}],imgs:[{src:e,top:"10%",width:"64%",height:"64%"}]},{x:2,y:1,borderRadius:"6px",shadow:"0 6px 0 #ffbec3",fonts:[{text:"\u52a0\u8f09\u4e2d",top:"74%",fontSize:"12px"}],imgs:[{src:e,top:"10%",width:"64%",height:"64%"}]},{x:2,y:2,borderRadius:"6px",shadow:"0 6px 0 #ffbec3",fonts:[{text:"\u52a0\u8f09\u4e2d",top:"74%",fontSize:"12px"}],imgs:[{src:e,top:"10%",width:"64%",height:"64%"}]},{x:1,y:2,borderRadius:"6px",shadow:"0 6px 0 #ffbec3",fonts:[{text:"\u52a0\u8f09\u4e2d",top:"74%",fontSize:"12px"}],imgs:[{src:e,top:"10%",width:"64%",height:"64%"}]},{x:0,y:2,borderRadius:"6px",shadow:"0 6px 0 #ffbec3",fonts:[{text:"\u52a0\u8f09\u4e2d",top:"74%",fontSize:"12px"}],imgs:[{src:e,top:"10%",width:"64%",height:"64%"}]},{x:0,y:1,borderRadius:"6px",shadow:"0 6px 0 #ffbec3",fonts:[{text:"\u52a0\u8f09\u4e2d",top:"74%",fontSize:"12px"}],imgs:[{src:e,top:"10%",width:"64%",height:"64%"}]}]),L=Object(d.a)(R,2),E=L[0],T=L[1],A=Object(o.useState)([{x:1,y:1,borderRadius:"6px",background:"#fee900",shadow:"0 6px 0 #f59d00",fonts:[{text:"\u958b\u59cb\n\u62bd\u734e",top:"10px",fontColor:"#db0214",fontSize:"24px",lineHeight:"24px",fontWeight:"900",wordWrap:!1,lengthLimit:"60%"}]}]),N=Object(d.a)(A,2),_=N[0],M=N[1],W=Object(o.useState)({position:"absolute",top:"45.1%",left:"50%",transform:"translateX(-50%)"}),P=Object(d.a)(W,2),D=P[0],J=P[1],F=Object(o.useState)({position:"absolute",top:"74.4%",left:"50%",transform:"translateX(-50%)",overflow:"hidden",textAlign:"center"}),H=Object(d.a)(F,2),K=H[0],U=H[1],V=Object(o.useState)({display:"block",width:"86%",position:"absolute",top:"52%",left:"50%",color:"#fff",fontSize:"12px",fontWeight:"500",borderRadius:"10px",transform:"translate(-50%,-50%)",textAlign:"center",whiteSpace:"nowrap",overflow:"hidden"}),X=Object(d.a)(V,2),q=X[0],G=X[1],Q=Object(o.useState)(260),Y=Object(d.a)(Q,2),Z=Y[0],$=Y[1],tt=Object(o.useState)(260),et=Object(d.a)(tt,2),nt=et[0],ot=et[1],it=function(){var t,e;(document.body.clientWidth||window.screen.width)>900&&(null===(t=document)||void 0===t||null===(e=t.body)||void 0===e||e.classList.add("ChristmasStyle"));var n=Number(p.current.offsetWidth),o=650*n/1e3;$(o),ot(o);var i=Math.round(58*n/1e3),r=Math.round(12*n/1e3),a=Math.round(29*n/1e3),c=Math.round(28*n/1e3),s=Math.round(31*n/1e3),u=Math.round(1014*n/1e3),d=Math.round(1678*n/1e3);T(E.map((function(t){return t.borderRadius="".concat(a,"px"),t.fonts[0].fontSize="".concat(c,"px"),t.shadow="0 ".concat(r,"px 0 #ffbec3"),t}))),M(_.map((function(t){return t.borderRadius="".concat(a,"px"),t.shadow="0 ".concat(r,"px 0 #f59d00"),t.fonts[0].top="".concat(a,"px"),t.fonts[0].fontSize="".concat(i,"px"),t.fonts[0].lineHeight="".concat(i+2,"px"),t}))),J(Object(f.a)(Object(f.a)({},D),{},{top:"".concat(u,"px")})),U(Object(f.a)(Object(f.a)({},K),{},{top:"".concat(d,"px")})),G(Object(f.a)(Object(f.a)({},q),{},{fontSize:"".concat(s,"px")}))},rt=function(){var t=Object(u.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("./prizes",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){if(!Array.isArray(t.data))return h.a.fire({padding:n,position:"center",icon:"error",title:"\u4f60\u7684\u7db2\u8def\u4f3c\u4e4e\u6709\u554f\u984c...",text:"\u66ab\u6642\u7121\u6cd5\u62bd\u734e\uff0c\u8acb\u7a0d\u5019\u518d\u91cd\u8a66",background:i,showConfirmButton:!1,allowOutsideClick:!1}),void v(!0);var e=E;t.data.forEach((function(t){e[t.Id]&&(e[t.Id].fonts[0].text=t.Name,e[t.Id].imgs[0].src=t.Image)})),T(e),v(!0)})).catch((function(){h.a.fire({padding:n,position:"center",icon:"error",title:"\u4f60\u7684\u7db2\u8def\u4f3c\u4e4e\u6709\u554f\u984c...",text:"\u66ab\u6642\u7121\u6cd5\u62bd\u734e\uff0c\u8acb\u7a0d\u5019\u518d\u91cd\u8a66",background:i,showConfirmButton:!1,allowOutsideClick:!1}),v(!0)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),at=function(){var t=Object(u.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.fire({padding:n,title:"\u6eab\u99a8\u63d0\u793a",input:"text",inputLabel:"\u70ba\u4e86\u4f60\u80fd\u6536\u5230\u4e2d\u734e\u79ae\u54c1\n\u8acb\u5148\u586b\u5beb\u4f60\u7684\u6b63\u78baLINE ID",inputValidator:function(t){if(!t||t.length<5)return"\u8acb\u586b\u5beb\u6b63\u78baLINE ID!"},background:i,showConfirmButton:!0,confirmButtonColor:"#ea5455"}).then((function(t){t.isConfirmed&&fetch("./verify",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({line_id:t.value})}).then((function(t){if(500===t.status)h.a.fire({padding:n,position:"center",icon:"error",title:"\u670d\u52d9\u5668\u7576\u6a5f\u4e2d...",text:"\u66ab\u6642\u7121\u6cd5\u62bd\u734e\uff0c\u8acb\u7a0d\u5019\u518d\u91cd\u8a66",background:i,showConfirmButton:!1,allowOutsideClick:!1});else if(400===t.status)h.a.fire({padding:n,position:"center",icon:"error",title:"\u8acb\u6aa2\u67e5\u4f60\u7684LINE ID\u662f\u5426\u8f38\u5165\u6b63\u78ba",background:i,showConfirmButton:!0,allowOutsideClick:!1,confirmButtonColor:"#ea5455"}).then((function(){at()}));else if(200===t.status)return t.json();return null})).then((function(e){e.success&&(c.current=e.data.count,x.current=t.value,window.sessionStorage.setItem("currentlineid",t.value),b.current=e.data.token,window.sessionStorage.setItem("currentjwttoken",e.data.token),h.a.fire({padding:n,position:"center",icon:"success",title:"\u795d\u4f60\u597d\u904b\uff01",background:i,showConfirmButton:!1,timer:1500}))})).catch((function(t){ct("\u4f60\u7684\u7db2\u8def\u597d\u50cf\u51fa\u4e86\u9ede\u554f\u984c\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66","error")}))}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ct=function(t,e){a.current.stop(),r.fire({padding:n,title:"\u63d0\u793a",text:t,icon:e,background:i,confirmButtonColor:"#ea5455",footer:'<a href="line://">\u8aee\u8a62\u5b98\u65b9\u5ba2\u670d</a>'})},st=function(){var t=fetch("./goodluck",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:b.current}}),e=new Promise((function(t,e){setTimeout((function(){e("\u8bf7\u6c42\u8d85\u65f6\uff01")}),6e3)}));Promise.race([t,e]).then((function(t){return 401===t.status?(a.current.stop(),r.fire({padding:n,title:"\u63d0\u793a",text:"\u9055\u898f\u64cd\u4f5c\uff0c\u8acb\u91cd\u65b0\u8f38\u5165\u4f60\u7684LINE ID",icon:"error",background:i,confirmButtonColor:"#ea5455",footer:'<a href="line://">\u8aee\u8a62\u5b98\u65b9\u5ba2\u670d</a>'}).then((function(){at()})),null):400===t.status?(a.current.stop(),r.fire({padding:n,title:"\u63d0\u793a",text:"\u8acb\u91cd\u65b0\u9a57\u8b49\u4f60\u7684LINE ID",icon:"info",background:i,confirmButtonColor:"#ea5455",footer:'<a href="line://">\u8aee\u8a62\u5b98\u65b9\u5ba2\u670d</a>'}).then((function(){at()})),null):500===t.status?(a.current.stop(),ct("\u76ee\u524d\u53c3\u8207\u4eba\u6578\u592a\u591a\uff0c\u670d\u52d9\u5668\u7e41\u5fd9\uff01\u8acb\u7a0d\u5f8c\u518d\u8a66","warning"),null):t.json()||t})).then((function(t){if(null!==t){if(!t.success)return ct("\u76ee\u524d\u53c3\u8207\u4eba\u6578\u592a\u591a\uff0c\u670d\u52d9\u5668\u7e41\u5fd9\uff01\u8acb\u7a0d\u5f8c\u518d\u8a66","warning");if(t.success&&!t.data)return c.current=0,ct("\u4f60\u7684\u62bd\u734e\u6b21\u6578\u5df2\u7528\u5b8c","info");j.current=t.data.prezis_id,O.current=t.data.win_code,function(t){var e=1+1e3*Math.round(6*Math.random());setTimeout((function(){a.current.stop(t)}),e)}(t.data.prezis_id),c.current--}})).catch((function(t){ct("\u4f60\u7684\u7db2\u8def\u597d\u50cf\u51fa\u4e86\u9ede\u554f\u984c\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66","error")}))};return Object(o.useEffect)((function(){return window.addEventListener("resize",it),k||rt(),it(),function(){window.removeEventListener("resize",it)}}),[k]),Object(w.jsxs)("section",{style:{position:"relative",width:"100%",maxWidth:"900px",minWidth:"320px",margin:"0 auto",backgroundColor:"#db0214"},children:[Object(w.jsx)("img",{src:"https://img.alicdn.com/imgextra/i3/917298378/O1CN01aXaRE92BlAxUT8BPj_!!917298378.jpg",alt:"",style:{position:"relative",width:"100%"},ref:p}),Object(w.jsx)("div",{style:D,children:Object(w.jsx)(l.a,{width:Z+"px",height:nt+"px",rows:3,cols:3,ref:a,prizes:E,buttons:_,defaultConfig:{speed:30,accelerationTime:2500,decelerationTime:5e3},defaultStyle:{background:"#fdefef",fontSize:"12px",fontColor:"#000",top:"78%"},onStart:function(){(function(){var t=window.sessionStorage.getItem("currentlineid"),e=window.sessionStorage.getItem("currentjwttoken");if(!x.current){if(!t)return at(),!1;x.current=t}if(!b.current){if(!e)return at(),!1;b.current=e}return!0})()&&(console.log(c.current),0!==c.current?(a.current.play(),st()):ct("\u4f60\u7684\u62bd\u734e\u6b21\u6578\u5df2\u7528\u5b8c","info"))},onEnd:function(e){O.current&&(I("\u606d\u559c\u4f60\u5df2\u4e2d\u734e\uff1a"+e.fonts[0].text),h.a.fire({padding:n,title:'\u606d\u559c\u4e2d\u734e\u4e86\n<span style="color:red">>>'.concat(e.fonts[0].text,"<<</span>"),html:"<span>\u4f60\u7684\u4e2d\u734e\u78bc\u70ba:\n<span>".concat(O.current,"</span><br/>\u5feb\u53bb\u627e\u5b98\u65b9\u5ba2\u670d\u9818\u53d6\u79ae\u54c1\u5427</span>"),imageUrl:e.imgs[0].src,allowOutsideClick:!1,confirmButtonText:"\u8907\u88fd\u4e2d\u734e\u78bc",imageWidth:150,background:"#fdefef url(".concat(t,")"),backdrop:'rgba(0,0,123,0.4) url("'.concat(t,'") left top no-repeat'),footer:'<a href="line://">\u806f\u7e6b\u5b98\u65b9LINE\u5ba2\u670d\u9818\u734e</a>'}).then((function(){m()(O.current)?h.a.fire("\u6210\u529f\u8907\u88fd\u4e2d\u734e\u78bc","","success"):h.a.fire("\u9a57\u8b49\u78bc\u8907\u88fd\u5931\u6557\uff0c\u8acb\u624b\u52d5\u9577\u6309\u8907\u88fd","","info")})))}})}),Object(w.jsxs)("div",{style:K,children:[Object(w.jsx)("img",{src:"https://img.alicdn.com/imgextra/i3/917298378/O1CN01CHuakF2BlAxb7pn2h_!!917298378.png",alt:"",style:{width:"100%"}}),Object(w.jsx)("span",{style:q,children:z})]}),Object(w.jsx)("div",{style:{width:"100%",height:"50px",color:"#fff",backgroundColor:"#db0214",lineHeight:"50px",fontSize:"1.1rem",shadow:"0 6px 3 #f59d00",borderRadius:"6px",textAlign:"center",margin:"0 auto"},onClick:function(){h.a.fire({title:"\u4e2d\u734e\u78bc\u67e5\u8a62",input:"text",inputLabel:"\u8acb\u8f38\u5165\u4f60\u7684\u4e2d\u734e\u78bc",inputAttributes:{autocapitalize:"off"},allowOutsideClick:!1,showCancelButton:!0,confirmButtonText:"\u67e5\u8a62",cancelButtonText:"\u53d6\u6d88",showLoaderOnConfirm:!0,confirmButtonColor:"#ea5455",background:i,inputValidator:function(t){if(32!==t.length)return"\u8acb\u586b\u5beb\u6b63\u78ba\u7684\u4e2d\u734e\u78bc"},preConfirm:function(t){return fetch("./search",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({win_code:t})}).then((function(t){if(200!==t.status)throw new Error("\u67e5\u8a62\u51fa\u932f\uff0c\u8acb\u6aa2\u67e5\u4f60\u8f38\u5165\u7684\u4e2d\u734e\u78bc\u662f\u5426\u6b63\u78ba");return t.json()})).then((function(t){if(!1===t.success)throw new Error("\u672a\u67e5\u8a62\u5230\u4f60\u7684\u4e2d\u734e\u78bc\uff0c\u8acb\u8f38\u5165\u6b63\u78ba\u4e2d\u734e\u78bc");return t.data})).catch((function(t){h.a.showValidationMessage(t)}))},footer:'<a href="line://">\u9047\u5230\u4e86\u554f\u984c?\u9ede\u64ca\u806f\u7e6b\u5b98\u65b9LINE\u5ba2\u670d</a>'}).then((function(t){if(console.log(t),null===t||void 0===t?void 0:t.value){var e=t.value;h.a.fire({title:e.prize_name,background:i,allowOutsideClick:!1,confirmButtonColor:"#ea5455",html:'\u4e2d\u734eLINE ID\uff1a<span style="color:green">'.concat(e.line_id,"</span></span>"),imageUrl:e.prize_image,imageWidth:150,imageAlt:e.prize_name,footer:'<a href="line://">\u8acb\u76e1\u5feb\u806f\u7e6b\u5b98\u65b9LINE\u5ba2\u670d\u9818\u53d6</a>'})}}))},children:"\u4e2d\u734e\u78bc\u67e5\u8a62"})]})},O=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(e){var n=e.getCLS,o=e.getFID,i=e.getFCP,r=e.getLCP,a=e.getTTFB;n(t),o(t),i(t),r(t),a(t)}))};a.a.render(Object(w.jsx)(i.a.StrictMode,{children:function(){var t,e=null===(t=window)||void 0===t?void 0:t.navigator.platform;return e&&window&&window.sessionStorage?/Win|Mac|Linux\s[^arm]/.test(e)?(h.a.fire({title:"\u7db2\u9801\u4e0d\u5141\u8a31\u7576\u524d\u8a2d\u5099\u8a2a\u554f",text:"\u8acb\u4f7f\u7528\u79fb\u52d5\u8a2d\u5099\u8a2a\u554f!",icon:"warning",allowOutsideClick:!1,showConfirmButton:!1}),null):Object(w.jsx)(j,{}):(h.a.fire({title:"\u4e0d\u652f\u6301\u7576\u524d\u700f\u89bd\u5668",text:"\u8acb\u66f4\u63db\u700f\u89bd\u5668!",icon:"warning",allowOutsideClick:!1,showConfirmButton:!1}),null)}()}),document.getElementById("root")),document.onkeydown=function(){var t=window.event;return 123!==t.keyCode&&(!t.ctrlKey||!t.shiftKey||73!==t.keyCode)&&(!t.shiftKey||121!==t.keyCode)&&(!t.ctrlKey||85!==t.keyCode)&&void 0},document.oncontextmenu=function(){return!1},O()}},[[39,1,2]]]);
//# sourceMappingURL=main.dc427acb.chunk.js.map